"use strict";!function(){function a(a,c){b(a,[void 0,void 0,void 0,void 0,c,void 0])}var b=function(a,b){var c,d,e=window.getComputedStyle(a);if(e){if(angular.forEach(["moz","o","webkit"],function(a){e[a+"Transform"]&&(c=e[a+"Transform"],d=a)}),c){var f=c.match(/\d+/g);f=f&&6==f.length?f.map(function(a){return Number(a)}):[1,0,0,1,0,0]}else f=[1,0,0,1,0,0];for(var g=0;6>g;g++)void 0!==b[g]&&(f[g]=b[g]);var h={};d?h[d+"Transform"]="matrix("+f.join(",")+")":h.transform="matrix("+f.join(",")+")",angular.element(a).css(h)}},c=angular.module("angular-cardflow",["ngTouch"]);c.directive("cardflow",["$swipe","$timeout",function(b,c){return{restrict:"E",template:'<div class="cardflow-wrapper" ng-swipe-left="swipeLeft($event)" ng-swipe-right="swipeRight($event)"><div class="cardflow-container" ng-transclude></div></div>',transclude:!0,scope:{model:"=?",mode:"=?",current:"=?"},link:function(d,e,f){c(function(){d.cardWidth=0,d.wrapperEl=angular.element(e.find("div")[0]),d.containerEl=angular.element(d.wrapperEl.find("div")[0]),d.model=d.model||{},d.model.current=d.current||d.model.current||0,d.model.cards=d.model.cards||[],d.mode=f.mode||"swipeSnapKinetic",d.model.onActive=d.model.onActive||function(){};var c=1;if(d.$watch(function(){return d.model.cards},function(){if(d.cardEls=d.containerEl.children(),d.cardEls&&d.cardEls[1]){d.cardWidth=d.cardEls[1].offsetLeft-d.cardEls[0].offsetLeft,0===d.cardWidth&&(d.cardWidth=d.cardEls[0].offsetWidth);var a=d.cardWidth*d.cardEls.length+d.cardEls[1].offsetLeft;d.containerEl.css({width:a+"px"}),d.model.pageSize=Math.floor(d.wrapperEl[0].clientWidth/d.cardWidth),c="swipeSnapOne"==d.mode?1:d.model.pageSize}}),"swipe"!=d.mode&&d.$watch(function(){return d.model.current},function(){if(d.cardEls){d.cardEls.removeClass("cardflow-active");var b=angular.element(d.cardEls[d.model.current]);b.addClass("cardflow-active"),d.cardWidth&&a(d.containerEl[0],d.cardWidth*-d.model.current)}}),("swipeSnapOne"==d.mode||"swipeSnapPage"==d.mode)&&(d.swipeLeft=function(){var a=d.model.current+c;a<d.cardEls.length&&(d.model.current=a)},d.swipeRight=function(){var a=d.model.current-c;a>=0&&(d.model.current=a)}),"swipeSnap"==d.mode||"swipeSnapKinetic"==d.mode||"swipe"==d.mode){var g={},h=window.getComputedStyle(d.containerEl[0]).transition;h&&(g.transition=h+""),angular.forEach(["moz","o","webkit"],function(a){h=window.getComputedStyle(d.containerEl[0])[a+"Transition"],h&&(g[a+"Transition"]=h)});var i,j=0,k=0,l=0;b.bind(d.wrapperEl,{start:function(a){d.cardEls.removeClass("cardflow-active"),j="swipe"==d.mode?a.x-k:a.x,angular.forEach(["moz","o","webkit"],function(a){d.containerEl.css(a+"Transition","none")}),d.containerEl.css({transition:"none"}),"swipeSnapKinetic"==d.mode&&(l=0,i=Date.now())},end:function(a){if(d.containerEl.css(g),"swipe"!=d.mode){var b=Math.floor(k/-d.cardWidth+.5);if("swipeSnapKinetic"==d.mode){var c=Date.now(),e=c-i,f=j-a.x,h=f/e;Math.abs(h)>1&&(b=Math.floor(b+h))}b>=0?b>d.cardEls.length-1&&(b=d.cardEls.length-1):b=0,d.model.current==b&&(d.model.current=-1,d.$apply()),d.model.current=b,d.$apply()}},move:function(b){k="swipe"!=d.mode?b.x-d.model.current*d.cardWidth-j:b.x-j,a(d.containerEl[0],k)}})}})}}}])}();