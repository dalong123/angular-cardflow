"use strict";!function(){var a=function(a,b){var c,d,e=window.getComputedStyle(a);if(e){if(angular.forEach(["moz","o","webkit"],function(a){e[a+"Transform"]&&(c=e[a+"Transform"],d=a)}),c){var f=c.match(/\d+/g);f=f&&6==f.length?f.map(function(a){return Number(a)}):[1,0,0,1,0,0]}else f=[1,0,0,1,0,0];for(var g=0;6>g;g++)void 0!==b[g]&&(f[g]=b[g]);var h={};d?h[d+"Transform"]="matrix("+f.join(",")+")":h.transform="matrix("+f.join(",")+")",angular.element(a).css(h)}},b=angular.module("angular-cardflow",["ngTouch"]);b.directive("cardflow",["$swipe","$timeout",function(b,c){return{restrict:"E",template:'<div class="cardflow-wrapper" ng-swipe-left="swipeLeft($event)" ng-swipe-right="swipeRight($event)"><div class="cardflow-container" ng-transclude></div></div>',transclude:!0,scope:{model:"=?",mode:"=?",current:"=?"},link:function(d,e,f){c(function(){var c,g=0,h=angular.element(e.find("div")[0]),i=angular.element(h.find("div")[0]),j=1;if(d.model=d.model||{},d.model.current=d.current||d.model.current||0,d.model.cards=d.model.cards||[],d.mode=f.mode||"swipeSnapKinetic",d.$watch(function(){return d.model.cards},function(){if(c=i.children(),c&&c[1]){g=c[1].offsetLeft-c[0].offsetLeft,0===g&&(g=c[0].offsetWidth);var a=g*c.length+c[1].offsetLeft;i.css({width:a+"px"}),d.model.pageSize=Math.floor(h[0].clientWidth/g),j="swipeSnapOne"==d.mode?1:d.model.pageSize}}),"swipe"!=d.mode&&d.$watch(function(){return d.model.current},function(){if(c){c.removeClass("cardflow-active");var b=angular.element(c[d.model.current]);b.addClass("cardflow-active"),g&&a(i[0],[void 0,void 0,void 0,void 0,g*-d.model.current,void 0])}}),("swipeSnapOne"==d.mode||"swipeSnapPage"==d.mode)&&(d.swipeLeft=function(){var a=d.model.current+j;a<c.length&&(d.model.current=a)},d.swipeRight=function(){var a=d.model.current-j;a>=0&&(d.model.current=a)}),"swipeSnap"==d.mode||"swipeSnapKinetic"==d.mode||"swipe"==d.mode){var k={},l=window.getComputedStyle(i[0]).transition;l&&(k.transition=l+""),angular.forEach(["moz","o","webkit"],function(a){l=window.getComputedStyle(i[0])[a+"Transition"],l&&(k[a+"Transition"]=l)});var m,n=0,o=0,p=0;b.bind(h,{start:function(a){c.removeClass("cardflow-active"),n="swipe"==d.mode?a.x-o:a.x,angular.forEach(["moz","o","webkit"],function(a){i.css(a+"Transition","none")}),i.css({transition:"none"}),"swipeSnapKinetic"==d.mode&&(p=0,m=Date.now())},end:function(a){if(i.css(k),"swipe"!=d.mode){var b=Math.floor(o/-g+.5);if("swipeSnapKinetic"==d.mode){var e=Date.now(),f=e-m,h=n-a.x,j=h/f;Math.abs(j)>1&&(b=Math.floor(b+j))}b>=0?b>c.length-1&&(b=c.length-1):b=0,d.model.current==b&&(d.model.current=-1,d.$apply()),d.model.current=b,d.$apply()}},move:function(b){o="swipe"!=d.mode?b.x-d.model.current*g-n:b.x-n,a(i[0],[void 0,void 0,void 0,void 0,o,void 0])}})}})}}}])}();